<!DOCTYPE html><html><head><!-- Created with tagspaces 2.6.0 --><meta http-equiv='Content-Type' content='text/html; charset=utf-8'><style type='text/css'>body{overflow:auto;width:100%;height:100%;font:13.34px Ubuntu,arial,clean,sans-serif;color:#000;line-height:1.4em;background-color:#fff;padding:15px}p{margin:1em 0;line-height:1.5em}table{font:100%;margin:1em}table th{border-bottom:1px solid #bbb;padding:.2em 1em}table td{border-bottom:1px solid #ddd;padding:.2em 1em}input[type=image],input[type=password],input[type=text],textarea{font:99% helvetica,arial,freesans,sans-serif}option,select{padding:0 .25em}optgroup{margin-top:.5em}code,pre{font:12px Monaco,'Courier New','DejaVu Sans Mono','Bitstream Vera Sans Mono',monospace}pre{margin:1em 0;font-size:12px;background-color:#eee;border:1px solid #ddd;padding:5px;line-height:1.5em;color:#444;overflow:auto;-webkit-box-shadow:rgba(0,0,0,.07) 0 1px 2px inset;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}pre code{padding:0;font-size:12px;background-color:#eee;border:none}code{font-size:12px;background-color:#f8f8ff;color:#444;padding:0 .2em;border:1px solid #dedede}img{border:0;max-width:100%}abbr{border-bottom:none}a{color:#4183c4;text-decoration:none}a:hover{text-decoration:underline}a code,a:link code,a:visited code{color:#4183c4}h2,h3{margin:1em 0}h1,h2,h3,h4,h5,h6{border:0}h1{font-size:170%;border-top:4px solid #aaa;padding-top:.5em;margin-top:1.5em}h1:first-child{margin-top:0;padding-top:.25em;border-top:none}h2{font-size:150%;margin-top:1.5em;border-top:4px solid #e0e0e0;padding-top:.5em}h3{font-size:130%;margin-top:1em}h4{font-size:120%;margin-top:1em}h5{font-size:115%;margin-top:1em}h6{font-size:110%;margin-top:1em}hr{border:1px solid #ddd}ol,ul{margin:1em 0 1em 2em}ol li,ul li{margin-top:.5em;margin-bottom:.5em}ol ol,ol ul,ul ol,ul ul{margin-top:0;margin-bottom:0}blockquote{margin:1em 0;border-left:5px solid #ddd;padding-left:.6em;color:#555}dt{font-weight:700;margin-left:1em}dd{margin-left:2em;margin-bottom:1em}</style></head><body data-sourceurl='' data-scrappedon='' ><h1 style="margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 36px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Introduction</h1><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">I want to present an important and interesting topic in computer science, the Finite State Machine (FSM). In this part we start with the basics, gaining an understanding of what FSMs are and what they can be used for. This part is very elementary, so please be patient. In subsequent parts things will become much more complicated and interesting.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p class="message note" style="margin-bottom: 0px; padding: 20px 25px 40px 70px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; background: url(&quot;/images/cmedit/Flash45.png&quot;) 15px 18px no-repeat scroll rgb(239, 239, 239); border: 1px solid rgb(212, 212, 212); color: rgb(81, 81, 81); line-height: 1.6; font-size: 12px; clear: both; font-family: helvetica, arial, verdana, tahoma, sans-serif; letter-spacing: normal;"><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Note:</strong>&nbsp;&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">This article combines a series of 6 works originally published to GameDev.net throughout 2004 entitled "Algorithmic Forays". It was collected together and revised by the original author in 2008 and published in the book&nbsp;<a href="http://www.amazon.com/Advanced-Game-Programming-GameDev-net-Collection/dp/1598638068/ref=pd_sim_b_2" class="bbc_url" title="External link" rel="nofollow external" data-amzn-asin="1598638068" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(15, 114, 218); text-decoration: underline;">Advanced Game Programming: A GameDev.net Collection</a>, which is one of 4 books collecting both popular GameDev.net articles and new original content in print format.<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h1 style="margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 36px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Finite State Machines - What are they?</h1><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">A finite state machine is a conceptual model that can used to describe how many things work. Think about a light bulb for instance. The circuit consists of a switch that can be ON or OFF, a few wires and the bulb itself. At any moment in time the bulb is in some state - it is either turned on (emits light) or turned off (no visible effect). For a more focused discussion, let's assume that we have two buttons - one for "turn on" and one for "turn off".</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">How would you describe the light bulb circuit? You'd probably put it like this: When it's dark and I press ON, the bulb starts emitting light. Then if I press ON again, nothing changes. If I press OFF the bulb is turned off. Then if I press OFF again, nothing changes.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">This description is very simple and intuitive, but in fact it describes a state machine!</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Think of it the following way: we have a machine (the bulb) with two states, ON and OFF. We have two inputs, an ON switch and an OFF switch. If we are in state ON, pressing ON changes nothing, but pressing OFF moves the machine to state OFF. If we are in state OFF, pressing OFF changes nothing, but pressing ON moves the machine to state ON.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The above is a rephrasing of the first description, just a little more formal. It is, in fact, a formal description of a state machine. Another customary way to describe state machines is with a diagram (people like diagrams and drawings more than words for some insights):</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[a142660ebbe17966feaaaf743d0d0ca7]" id="ipb-attach-url-16066-0-45680300-1485530556" href="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-84996300-1370053229.jpg" title="AdvGameProg_FSMandRDP_Bendersky_1.jpg - Size: 50.4KB, Downloads: 35" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-84996300-1370053229_thumb.jpg" id="ipb-attach-img-16066-0-45680300-1485530556" class="attach" width="480" height="264" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_1.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Textual descriptions can become quite wordy, and a simple diagram like this can contain a lot of information. Note how states are represented by circles, and transitions by arrows. This is almost all one needs to know, which makes diagrams very descriptive. This state machine can also be translated to (C++) code:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">...</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">...</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">typedef</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">enum</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">ON</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> OFF</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> bulb_state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">typedef</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">enum</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">TURN_ON</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> TURN_OFF</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> switch_command</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">...</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">...</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
bulb_state state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
switch_command command</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">switch</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">case</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> ON</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">command </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> TURN_ON</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">else</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">command </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> TURN_OFF</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      state </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> OFF</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">break</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">case</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> OFF</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">command </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> TURN_ON</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      state </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> ON</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">else</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">command </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> TURN_OFF</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">break</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">default</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">assert</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">If code such as this looks familiar, it's hardly surprising. Many of us write state machines in our code without even noticing. Most of the state machines we write are "implicit", in the sense that there isn't a single switch statement that handles the whole machine, but rather it's distributed throughout the whole program. If, additionally, the state variables don't have the word "state" in their name, guessing that a certain code is a state machine in disguise is even harder.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Many programs we write are state machines. Think about a chess game for a moment. If we write a program to play chess against human beings, it's actually a state machine in some sense. It waits for the human to move - an idle state. Once the human moves, it goes into active state of "thinking" about a move to make. A game can have an "end" state such as a victory for one side or a draw. If we think of a GUI for a chess game, the state machine is even more obvious. There is a basic state, when it's a human's move. If a human clicks on some piece, we go into the "clicked" state. In this state, a click on an empty tile may produce a move by the piece. Note that if we click on an empty tile in the "basic" state (no pieces selected), nothing happens. Can you see an obvious state machine here?</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Finite?</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">In the beginning of this part, I said we were going to discuss FSMs. By now I hope you already know what a state machine is, but what has "finite" got to do with it?</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Well, our computers are finite. There's only so much memory (even if it's quite large these days). Therefore, the applications are finite. Finite = Limited. For state machines it means that the amount of states is limited. 1 is limited, 2 is limited, but 107 is also limited, though quite large.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">This point may seem banal to some of you, but it is important to emphasize. So now you know what a FSM is: a state machine with a finite number of states. It can be inferred that all state machines implemented in computer hardware and software must be FSMs.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Employing state machines for our needs</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">State machines can be also used explicitly. We can benefit a lot from knowingly incorporating state machines in our code. First and foremost, it's a great way to reason about difficult problems. If you see that your code or a part of it can actually be in several states, with inputs affecting these states and outputs resulting from them, you can reason about this code using a state machine. Draw a diagram; visualizing always helps. With a diagram errors can be spotted more easily. Think about all the inputs to your code - what should they change in every state? Does your code cover all possibilities (all inputs in all states)? Are some state transitions illegal?</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Another use of state machines is for certain algorithms. In the next part you'll see how essential state machines are for a very common and important application: regular expressions.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h1 style="margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 36px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Regular expressions (regexes)</h1><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Think of an identifier in C++ (such as&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">this</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">,&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">temp_var2</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">,&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">assert</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;etc.). How would you describe what qualifies for an identifier? Let's see if we remember... an identifier consists of letters, digits and the underscore character (_), and must start with a letter (it's possible to start with an underscore, but better not to, as these identifiers are reserved by the language).&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">A regular expression is a notation that allows us to define such things precisely:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">letter (letter | digit | underscore) *</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">In regular expressions, the vertical bar | means "or", the parentheses are used to group sub expressions (just like in math) and the asterisk (*) means "zero or more instances of the previous". So the regular expression above defines the set of all C++ identifiers (a letter followed by zero or more letters, digits or underscores). Let's see some more examples:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><ul class="bbc" style="margin: 12px 0px 12px 40px; padding: 0px; list-style-position: outside; list-style-image: none; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">abb*a</strong>&nbsp;- all words starting with a, ending with a, and having at least one b in-between. For example: "aba", "abba", "abbbba" are words that fit, but "aa" or "abab" are not.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">0|1|2|3|4|5|6|7|8|9</strong>&nbsp;- all digits. For example: "1" is a digit, "fx" is not.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">x(y|z)*(a|b|c)</strong>&nbsp;- all words starting with x, then zero or more y or z, and end with a, b or c. For example: "xa", "xya", "xzc", "xyzzzyzyyyzb".</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">xyz</strong>&nbsp;- only the word "xyz".</li></ul><p><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">There is another symbol we'll use:&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;(usually denoted with the Greek letter Epsilon)&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;means "nothing". So, for example the regular expression for "either xy or xyz" is:&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">xy(z|<i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">eps</i>)</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">People familiar with regexes know that there are more complicated forms than * and |. However, anything can be built from *, | and&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. For instance,&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">x?</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;(zero or one instance of x) is a shorthand for&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(x|eps)</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">x+</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;(one or more instances of x) is a shorthand for&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">xx*</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. Note also the interesting fact that * can be represented with +, namely:&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">x*</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;is equivalent to&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(x+)|<i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">eps</i></strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">[Perl programmers and those familiar with Perl syntax (Python programmers, that would include you) will recognize&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;as a more elegant alternative to the numerical notation {m, n} where both m and n are zero. In this notation,&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">x*</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;is equivalent to&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">x{0,}</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;(unbound upper limit),&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">x+</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;is&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">x{1,}</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;and all other cases can be built from these two base cases. - Ed.]</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Recognizing strings with regexes</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Usually a regex is implemented to solve some recognition problem. For example, suppose your application asks a question and the user should answer Yes or No. The legal input, expressed as a regex is&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(yes)|(no)</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. Pretty simple and not too exciting - but things can get much more interesting.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Suppose we want to recognize the following regex:&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, namely all words consisting of a's and b's and ending with abb. For example: "ababb", "aaabbbaaabbbabb". Say you'd like to write the code that accepts such words and rejects others. The following function does the job:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">bool</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> recognize</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">string</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> str</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">string</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">::</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">size_type len </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> str</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">length</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">();</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// can't be shorter than 3 chars</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">len </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">3</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">false</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// last 3 chars must be "abb"</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">str</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">substr</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">len </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">3</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">3</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">!=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">"abb"</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">false</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// must contain no chars other than "a" and "b"</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">str</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">find_first_not_of</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">"ab"</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">!=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">string</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">::</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">npos</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">false</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">true</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">It's pretty clean and robust - it will recognize&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;and reject anything else. However, it is clear that the techniques employed in the code are very "personal" to the regex at hand.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">If we slightly change the regex to&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb(a|b)*</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;for instance (all sequences of a's and b's that have abb somewhere in them), it would change the algorithm completely. (We'd then probably want to go over the string, a char at a time and record the appearance of abb. If the string ends and abb wasn't found, it's a rejection, etc.). It seems that for each regex, we should think of some algorithm to handle it, and this algorithm can be completely different from algorithms for other regexes.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">So what is the solution? Is there any standardized way to handle regexes? Can we even dream of a general algorithm that can produce a recognizer function given a regex? We sure can!</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">FSMs to the rescue</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">It happens so that Finite State Machines are a very useful tool for regular expressions. More specifically, a regex (any regex!) can be represented as an FSM. To show how, however, we must present two additional definitions (which actually are very logical, assuming we use a FSM for a regex).</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><ul class="bbc" style="margin: 12px 0px 12px 40px; padding: 0px; list-style-position: outside; list-style-image: none; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">A start state is the state in which a FSM starts.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">An accepting state is a final state in which the FSM returns with some answer.</li></ul><p><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">It is best presented with an example:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[a142660ebbe17966feaaaf743d0d0ca7]" id="ipb-attach-url-16074-0-45738800-1485530556" href="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-57361700-1370053816.jpg" title="AdvGameProg_FSMandRDP_Bendersky_2.jpg - Size: 45.44KB, Downloads: 36" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-57361700-1370053816_thumb.jpg" id="ipb-attach-img-16074-0-45738800-1485530556" class="attach" width="480" height="411" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_2.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The start state 0 is denoted with a "Start" arrow. 1 is the accepting state (it is denoted with the double border). Now, try to figure out what regex this FSM represents.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">It actually represents&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">xy*</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;- x and then 0 or more of y. Do you see how? Note that x leads the FSM to state 1, which is the accepting state. Adding y keeps the FSM in the accepting state. If a x appears when in state 1, the FSM moves to state 2, which is non accepting and "stuck", since any input keeps the FSM in state 2 (because&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">xy*</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;rejects strings where a x comes after y-s). But what happens with other letters? For simplicity we'll now assume that for this FSM our language consists of solely x and y. If our input set would be larger (say the whole lowercase alphabet), we could define that each transition not shown (for instance, on input "z" in state 0) leads us into some "unaccepting" state.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">I will now present the general algorithm for figuring out whether a given FSM recognizes a given word. It's called "FSM Simulation". But first lets define an auxiliary function:&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">move(state, input)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;returns the state resulting from getting&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">input</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;in state&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">state</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. For the sample FSM above, move(0, X) is 1, move (0, Y) is 0, etc. So, the algorithm goes as follows:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">state </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> start_state
input </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> get_next_input
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">while</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">not</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">end</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> of input </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">do</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  state </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> move</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> input</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  input </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> get_next_input
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">end</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">is</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> a </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">final</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">"ACCEPT"</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">else</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">"REJECT"</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The algorithm is presented in very general terms and should be well understood. Lets "run" it on the simple&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">xy*</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;FSM, with the input "xyy". We start from the start state - 0; Get next input: x, end of input? not yet; move(0, x) moves us to state 1; input now becomes y; not yet end of input; move(1, y) moves us to state 1; exactly the same with the second y; now it's end of input; state 1 is a final state, so "ACCEPT";</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Piece of cake isn't it? Well, it really is! It's a straightforward algorithm and a very easy one for the computer to execute.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Let's go back to the regex we started with -&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. Here is the FSM that represents (recognizes) it:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[]" id="ipb-attach-url-16075-0-45824500-1485530556" href="https://www.gamedev.net/uploads/" title="AdvGameProg_FSMandRDP_Bendersky_3.jpg - Size: 29.72KB, Downloads: 28" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-30103200-1370053817_thumb.jpg" id="ipb-attach-img-16075-0-45824500-1485530556" class="attach" width="480" height="199" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_3.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Although it is much more complicated than the previous FSM, it is still simple to comprehend. This is the nature of FSMs - looking at them you can easily characterize the states they can be in, what transitions occur, and when. Again, note that for simplicity our alphabet consists of solely "a" and "b".</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Paper and pencil is all you need to "run" the FSM Simulation algorithm on some simple string. I encourage you to do it, to understand better how this FSM relates to the&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;regex.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Just for example take a look at the final state - 3. How can we reach it? From 2 with the input b. How can we reach 2? From 1 with input b. How can we reach 1? Actually from any state with input a. So, "abb" leads us to accept a string, and it indeed fits the regex.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Coding it the FSM way</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">As I said earlier, it is possible to generate code straight from any regex. That is, given a regular expression, a general tool can generate the code that will correctly recognize all strings that fit the regex, and reject the others. Let's see what it takes...</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The task is indeed massive, but consider dividing it to two distinct stages:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><ol class="bbc" style="margin-right: 0px; margin-bottom: 0px; margin-left: 40px; padding: 0px; list-style-position: initial; list-style-image: initial; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Convert the regex to a FSM</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Write FSM code to recognize strings</li></ol><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Hey, we already know how to do the second stage! It is actually the FSM Simulation algorithm we saw earlier. Most of the algorithm is the same from FSM to FSM (just dealing with input). The only part that changes is the "move" function, which represents the transition diagram of some FSM, and we learned how to code the transition function in the pvery basic, the technique is the same for any FSM!</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Let's now write down the full code that recognizes&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">#include</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">&lt;iostream&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">#include</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">&lt;cassert&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">#include</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">&lt;string&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">using</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">namespace</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> std</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">typedef</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">int</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">     fsm_state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">typedef</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">char</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">    fsm_input</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">bool</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> is_final_state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">fsm_state state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">state </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">3</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">?</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">true</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">false</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
fsm_state get_start_state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">void</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
fsm_state move</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">fsm_state state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> fsm_input input</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// our alphabet includes only 'a' and 'b'</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">input </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">!=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'a'</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&amp;&amp;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> input </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">!=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'b'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">assert</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">switch</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">case</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">input </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'a'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">else</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">input </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'b'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">break</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">case</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">input </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'a'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">else</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">input </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'b'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">2</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">break</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">case</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">2</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">input </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'a'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">else</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">input </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'b'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">3</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">break</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">case</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">3</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">input </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'a'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">else</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">input </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'b'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">break</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">default</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">assert</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">bool</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> recognize</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">string</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> str</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">str </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">""</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">false</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  fsm_state state </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> get_start_state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">();</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">string</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">::</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">const_iterator i </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> str</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">begin</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">();</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  fsm_input input </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">*</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">i</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">while</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">i </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">!=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> str</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">end</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">())</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    state </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> move</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">*</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">i</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">++</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">i</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">is_final_state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">))</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">true</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">else</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">false</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// simple driver for testing</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">int</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> main</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">int</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> argc</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">char</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">**</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> argv</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  recognize</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">argv</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">[</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">])</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">?</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> cout </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> cout </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Take a good look at the&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">recognize</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;function. You should immediately see how closely it follows the FSM Simulation algorithm. The FSM is initialized to the start state, and the first input is read. Then, in a loop, the machine moves to its next state and fetches the next input, etc. until the input string ends. Eventually, we check whether we reached a final state.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Note that this&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">recognize</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;function will be the same for&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">any</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;regex. The only functions that change are the trivial&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">is_final_state</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;and&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">get_start_state</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, and the more complicated transition function&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">move</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. But&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">move</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;is very structural - it closely follows the graphical description of the FSM. As you'll see later, such transition functions are easily generated from the description.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">So, what have we got so far? We know how to write code that runs a state machine on a string. What don't we know? We still don't know how to generate the FSM from a regex.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h1 style="margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 36px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">DFA + NFA = FSM</h1><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">FSM, as you already know, stands for Finite State Machine. A more scientific name for it is FA - Finite Automaton (plural&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">automata</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">). Finite Automata can be classified into several categories, but the one we need for the sake of regex recognition is the notion of&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">determinism</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. Something is deterministic when it involves no&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">chance</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;- everything is known and can be prescribed and simulated beforehand. On the other hand, nondeterminism is about chance and probabilities. It is commonly defined as "A property of a computation which may have more than one result".&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Thus, the world of FSMs can be divided to two: a deterministic FSM is called DFA (Deterministic Finite Automaton) and a nondeterministic FSM is called NFA (Nondeterministic Finite Automaton).</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">NFA</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">A&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">nondeterministic finite automaton</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;is a mathematical model that consists of:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><ol class="bbc" style="margin-right: 0px; margin-bottom: 0px; margin-left: 40px; padding: 0px; list-style-position: initial; list-style-image: initial; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">A set of states S</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">A set of input symbols A (the input symbol alphabet)</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">A transition function&nbsp;<i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">move</i>&nbsp;that maps state-symbol pairs to sets of states</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">A state s0 that is the start state</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">A set of states F that are the final states</li></ol><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">I will now elaborate on a few fine points (trying to simplify and avoid mathematical implications).&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">A NFA&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">accepts</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;an input string&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">X</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;if and only if there is some path in the transition graph from the start state to some accepting (final) state, such that the edge labels along this path spell out&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">X</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The definition of a NFA doesn't pose a restriction on the amount of states resulting in some input in some state. So, given we're in some state&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;it is completely legal (in a NFA) to transition to several different states given the input&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Furthermore, epsilon (</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">) transitions are allowed in a NFA. That is, there may be a transition from state to state given "no input".&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">I know this must sound very confusing if it's the first time you learn about NFAs, but an example I'll show a little later should make things more understandable.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">DFA</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">By definition, a&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">deterministic finite automaton</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;is a special case of a NFA, in which&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><ol class="bbc" style="margin-right: 0px; margin-bottom: 0px; margin-left: 40px; padding: 0px; list-style-position: initial; list-style-image: initial; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">No state has an&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">eps</strong>-transition</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">For each state&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">S</strong>&nbsp;and input&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">a</strong>, there is at most one edge labeled&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">a</strong>&nbsp;leaving&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">S</strong>.</li></ol><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">You can immediately see that a DFA is a more "normal" FSM. In fact the FSMs we were discussing earlier are DFAs.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Recognizing regexes with DFAs and with NFAs</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">To make this more tolerable, consider an example comparing the DFA and the NFA for the regex&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;we saw earlier. Here is the DFA:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[]" id="ipb-attach-url-16075-0-45853200-1485530556" href="https://www.gamedev.net/uploads/" title="AdvGameProg_FSMandRDP_Bendersky_3.jpg - Size: 29.72KB, Downloads: 28" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-30103200-1370053817_thumb.jpg" id="ipb-attach-img-16075-0-45853200-1485530556" class="attach" width="480" height="199" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_3.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">And this is the NFA:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[a142660ebbe17966feaaaf743d0d0ca7]" id="ipb-attach-url-16076-0-45909000-1485530556" href="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-73208900-1370053817.jpg" title="AdvGameProg_FSMandRDP_Bendersky_4.jpg - Size: 19.7KB, Downloads: 33" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-73208900-1370053817_thumb.jpg" id="ipb-attach-img-16076-0-45909000-1485530556" class="attach" width="480" height="151" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_4.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Can you see a NFA unique feature in this diagram? Look at state 0. When the input is&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, where can we move? To state 0 and state 1 - a multiple transition, something that is illegal in a DFA. Take a minute to convince yourself that this NFA indeed accepts&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. For instance, consider the input string&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">abababb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. Recall how NFA's&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">acceptance</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;of a string is defined. So, is there a path in the NFA graph above that "spells out"&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">abababb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">? There indeed is. The path will stay in state 0 for the first 4 characters, and then will move to states 1-&gt;2-&gt;3. Consider the input string&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">baabab</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. Is there a path that spells out this string? No, there isn't, as in order to reach the final state, we must go through&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;in the end, which the input string lacks.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Both NFAs and DFAs are important in computer science theory and especially in regular expressions. Here are a few points of difference between these constructs:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><ul class="bbc" style="margin: 12px 0px 12px 40px; padding: 0px; list-style-position: outside; list-style-image: none; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">It is simpler to build a NFA directly from a regex than a DFA.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">NFAs are more compact that DFAs. You must agree that the NFA diagram is much simpler for the&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">(a|b)*abb&nbsp;</strong>regex. Due to its definition, a NFA doesn't explicitly need many of the transitions a DFA needs. Note how elegantly state 0 in the NFA example above handles the&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">(a|b)*</strong>&nbsp;alternation of the regex. In the DFA, the char&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">a</strong>&nbsp;can't both keep the automaton in state 0 and move it to state 1, so the many transitions on&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">a</strong>&nbsp;to state 1 are required from any other state.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">The compactness also shows in storage requirements. For complex regexes, NFAs are often smaller than DFAs and hence consume less space. There are even cases when a DFA for some regex is exponential in size (while an NFA is always linear) - though this is quite rare.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">NFAs can't be directly simulated in the sense DFAs can. This is due to them being nondeterministic "beings", while our computers are deterministic. They must be simulated using a special technique that generates a DFA from their states "on the fly". More on this later.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">The previous leads to NFAs being less time efficient than DFAs. In fact, when large strings are searched for regex matches, DFAs will almost always be preferable.</li></ul><p><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">There are several techniques involving DFAs and NFAs to build recognizers from regexes:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><ul class="bbc" style="margin: 12px 0px 12px 40px; padding: 0px; list-style-position: outside; list-style-image: none; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Build a NFA from the regex. "Simulate" the NFA to recognize input.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Build a NFA from the regex. Convert the NFA to a DFA. Simulate the DFA to recognize input.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Build a DFA directly from the regex. Simulate the DFA to recognize input.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">A few hybrid methods that are too complicated for our discussion.</li></ul><p><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">At first, I was determined to spare you from the whole DFA/NFA discussion and just use the third - direct DFA - technique for recognizer generation. Then, I changed my mind, for two reasons. First, the distinction between NFAs and DFAs in the regex world is important. Different tools use different techniques (for instance, Perl uses NFA while lex and egrep use DFA), and it is valuable to have at least a basic grasp of these topics. Second, and more important, I couldn't help falling to the charms of the NFA-from-regex construction algorithm. It is simple, robust, powerful and complete – in one word, beautiful.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">So, I decided to go for the second technique.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h1 style="margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 36px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Construction of a NFA from a regular expression</h1><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Recall the basic building blocks of regular expressions:&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;which represents "nothing" or "no input"; characters from the input alphabet (we used&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;and&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">b</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;most often here); characters may be concatenated, like this:&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">; alternation&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a|b</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;meaning&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;or&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">b</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">; the star&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">*</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;meaning "zero or more of the previous"; and grouping&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">()</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">What follows is&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Thompson's construction</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;- an algorithm that builds a NFA from a regex. The algorithm is syntax directed, in the sense that it uses the syntactic structure of the regex to guide the construction process.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The beauty and simplicity of this algorithm is in its modularity. First, construction of trivial building blocks is presented.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">For&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, construct the NFA:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[a142660ebbe17966feaaaf743d0d0ca7]" id="ipb-attach-url-16077-0-45960000-1485530556" href="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-13277800-1370053818.jpg" title="AdvGameProg_FSMandRDP_Bendersky_6.jpg - Size: 22.58KB, Downloads: 28" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-13277800-1370053818_thumb.jpg" id="ipb-attach-img-16077-0-45960000-1485530556" class="attach" width="480" height="119" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_6.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Here&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">i</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;is a new start state and&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">f</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;is a new accepting state. It's easy to see that this NFA recognizes the regex&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">For some&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;from the input alphabet, construct the NFA:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[]" id="ipb-attach-url-16078-0-46047800-1485530556" href="https://www.gamedev.net/uploads/" title="AdvGameProg_FSMandRDP_Bendersky_7.jpg - Size: 22.64KB, Downloads: 26" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-45037100-1370053818_thumb.jpg" id="ipb-attach-img-16078-0-46047800-1485530556" class="attach" width="480" height="119" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_7.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Again, it's easy to see that this NFA recognizes the trivial regex&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Now, the interesting part of the algorithm: an inductive construction of complex NFAs from simple NFAs. More specifically, given that&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(s)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;and&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(t)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;are NFA's for regular expressions&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">s</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;and&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">t</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, we'll see how to combine the NFAs&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(s)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;and&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(t)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;according to the combination of their regexes.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">For the regular expression&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">s|t</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, construct the following composite NFA&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(s|t)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[]" id="ipb-attach-url-16079-0-46165800-1485530556" href="https://www.gamedev.net/uploads/" title="AdvGameProg_FSMandRDP_Bendersky_8.jpg - Size: 44.32KB, Downloads: 26" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-81015300-1370053818_thumb.jpg" id="ipb-attach-img-16079-0-46165800-1485530556" class="attach" width="480" height="280" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_8.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transitions into and out of the simple NFAs assure that we can be in either of them when the match starts. Any path from the initial to the final state must pass through either&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(s)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;or&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(t)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;exclusively. Thus we see that this composite NFA recognizes&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">s|t</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">For the regular expression&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">st</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;(</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">s</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;and then&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">t</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">), construct the composite NFA&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">NFA(st)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[]" id="ipb-attach-url-16080-0-46284100-1485530556" href="https://www.gamedev.net/uploads/" title="AdvGameProg_FSMandRDP_Bendersky_9.jpg - Size: 32.27KB, Downloads: 27" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-39247500-1370053819_thumb.jpg" id="ipb-attach-img-16080-0-46284100-1485530556" class="attach" width="480" height="128" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_9.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The composite NFA will have the start state of&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(s)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;and the end state of&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(t)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. The accepting (final) state of&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(s)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;is merged with the start state of&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(t)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. Therefore, all paths going through the composite NFA must go through&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(s)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;and then through&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(t)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, so it indeed recognizes&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(st)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">For the regular expression&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">s*</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, construct the composite NFA&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(s*)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[]" id="ipb-attach-url-16081-0-46401800-1485530556" href="https://www.gamedev.net/uploads/" title="AdvGameProg_FSMandRDP_Bendersky_10.jpg - Size: 32.15KB, Downloads: 11" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-72076200-1370053819_thumb.jpg" id="ipb-attach-img-16081-0-46401800-1485530556" class="attach" width="480" height="222" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_10.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Note how simply the notion of "zero or more" is represented by this NFA. From the initial state, either "nothing" is accepted with the&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transition to the final state or the "more than" is accepted by going into&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(s)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. The&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transition inside&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(s)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;denotes that&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">N(s)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;can appear again and again.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">For the sake of completeness: a parenthesized regular expression&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(s)</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;has the same NFA as&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">s</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, namely</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;N(s)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">As you can see, the algorithm covers all the building blocks of regular expressions, denoting their translations into NFAs.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">An example</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">If you follow the algorithm closely, the following NFA will result for (our old friend,) the regex&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[]" id="ipb-attach-url-16082-0-46518200-1485530556" href="https://www.gamedev.net/uploads/" title="AdvGameProg_FSMandRDP_Bendersky_11.jpg - Size: 29.11KB, Downloads: 27" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-20849400-1370053820_thumb.jpg" id="ipb-attach-img-16082-0-46518200-1485530556" class="attach" width="480" height="186" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_11.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Sure, it is much larger than the NFA we saw earlier for recognizing the same regex, but this NFA was automatically generated from a regex description using&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Thompson's construction</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, rather than crafted by hand.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Let's see how this NFA was constructed:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">First, it's easy to note that states 2 and 3 are the basic NFA for the regex&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Similarly, states 4 and 5 are the NFA for&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">b</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Can you see the&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a|b</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">? It's clearly states 1,2,3,4,5,6 (without the&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transition from 6 to 1).&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Parenthesizing&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;doesn't change the NFA&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The addition of states 0 and 7, plus the&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transition from 6 to 1 is the star on&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">NFA(a|b)</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, namely states 0 - 7 represent&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The rest is easy. States 8 - 10 are simply the concatenation of&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;with&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Try to run a few strings through this NFA until you convince yourself that it indeed recognizes&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. Recall that a NFA recognizes a string when the string's characters can be spelled out on some path from the initial to the final state.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Implementation of a simple NFA</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">At last, let's get our hands on some code. Now that we know the theory behind NFA-from-regex construction, it's clear that we will be doing some NFA manipulations. But how will we represent NFAs in code?</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">NFA is not a trivial concept, and there are full-blown implementations for general NFAs that are far too complex for our needs. My plan is to code as simple an implementation as possible - one that will be enough for our needs and nothing more. After all, the regex recognizing engine is not supposed to expose its NFAs to the outer world - for us a NFA is only an intermediate representation of a regular expression, which we want to simulate in order to "accept" or "reject" input strings.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">My philosophy in such cases is the KISS principle: "Keep It Simple, Stupid". The goal is first to code the simplest implementation that fits my needs. Later, I have no problem refactoring parts of the code and inserting new features, on an as-needed basis.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">A very simple NFA implementation is now presented. We will build upon it later, and for now it is enough just to demonstrate the concept. Here is the interface:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">#ifndef</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> NFA_H
</span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">#define</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> NFA_H
</span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">#include</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">&lt;vector&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">using</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">namespace</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> std</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// Convenience types and constants</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">typedef</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">unsigned</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">typedef</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">char</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> input</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">enum</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">EPS </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> NONE </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">};</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">class</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> NFA
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">public</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// Constructed with the NFA size (amount of</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// states), the initial state and the final state</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    NFA</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">unsigned</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> size_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state initial_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state final_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// Adds a transition between two states</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">void</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">state </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state to</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> input </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// Prints out the NFA</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">void</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> show</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">void</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">private</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">bool</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> is_legal_state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">state s</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    state initial</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    state </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">final</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">unsigned</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> size</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    vector</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">vector</span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">&lt;input&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> trans_table</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">};</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">#endif</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// NFA_H</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">As promised, the public interface is kept trivial, for now. All we can do is create a NFA object (specifying the amount of states, the start state and the final state), add transitions to it, and print it out. This NFA will then consist of states 0 .. size-1, with the given transitions (which are single characters). Note that we use only one final state for now, for the sake of simplicity. Should we need more than one, it won't be difficult to add.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">A word about the implementation: I don't want to go deep into graph-theory here (if you're not familiar with the basics, a web search can be very helpful), but basically a NFA is a directed graph. It is most common to implement a graph using either a matrix or an array of linked lists. The first implementation is more speed efficient, the second is better space-wise. For our NFA I picked the matrix (vector of vectors), mostly because (in my opinion) it is simpler.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The classic matrix implementation of a graph has 1 in cell (</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">i</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">,&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">j</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">) when there is an edge between vertex&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">i</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;and vertex&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">j</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, and 0 otherwise.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">A NFA is a special graph, in the sense that we are interested not only in whether there is an edge, but also in the condition for the edge (the input that leads from one state to another in FSM terminology). Thus, our matrix holds inputs (a nickname for chars, as you can see). So, for instance, '</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">c</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">' in trans_table[i][j] means that the input '</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">c</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">' leads from state&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">i</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;to state&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">j</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;in our NFA.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Here is the implementation of the NFA class:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">#include</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">&lt;iostream&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">#include</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">&lt;string&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">#include</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">&lt;cassert&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">#include</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">&lt;cstdlib&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">#include</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">"nfa.h"</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">using</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">namespace</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> std</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
NFA</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">::</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">NFA</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">unsigned</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> size_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state initial_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state final_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  size </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> size_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  initial </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> initial_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">final</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> final_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">assert</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">is_legal_state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">initial</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">));</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">assert</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">is_legal_state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">final</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">));</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// Initialize trans_table with an "empty graph",</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// no transitions between its states</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">for</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">unsigned</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> i </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> i </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> size</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">++</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">i</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    vector</span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">&lt;input&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> v</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">for</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">unsigned</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> j </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> j </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> size</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">++</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">j</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      v</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">push_back</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">NONE</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    trans_table</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">push_back</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">v</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">bool</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> NFA</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">::</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">is_legal_state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">state s</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// We have 'size' states, numbered 0 to size-1</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">s </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">||</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> s </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&gt;=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> size</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">false</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">true</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">void</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> NFA</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">::</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">state </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state to</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> input </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">assert</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">is_legal_state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">));</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">assert</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">is_legal_state</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">to</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">));</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  trans_table</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">[</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">][</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">to</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">]</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">void</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> NFA</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">::</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">show</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">void</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  cout </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">"This NFA has "</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> size </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">" states: 0 - "</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> size </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> endl</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  cout </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">"The initial state is "</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> initial </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> endl</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  cout </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">"The final state is "</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">final</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> endl </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> endl</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">for</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">unsigned</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> size</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">++</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">for</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">unsigned</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> to </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> to </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> size</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">++</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">to</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      input </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> trans_table</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">[</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">][</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">to</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">];</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">!=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> NONE</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        cout </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">"Transition from "</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">" to "</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> to </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">" on input "</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">==</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> EPS</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
          cout </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">"EPS"</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> endl</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">else</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
          cout </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> endl</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The code is very simple, so you should have no problem understanding what every part of it does. To demonstrate, let's see how we would use this class to create the NFA for&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;- the one we built using&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Thompson's construction</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;earlier (only the driver code is included):</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">#include</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">"nfa.h"</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">int</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> main</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">()</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  NFA n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">11</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">10</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> EPS</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">7</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> EPS</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">2</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> EPS</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">4</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> EPS</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">2</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">3</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'a'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">4</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">5</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'b'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">3</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">6</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> EPS</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">5</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">6</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> EPS</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">6</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> EPS</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">6</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">7</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> EPS</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">7</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">8</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'a'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">8</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">9</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'b'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">9</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">10</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'b'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  n</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">show</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">();</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">This would (quite expectedly) result in the following output:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><tt style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-size: 14px; letter-spacing: normal;">This NFA has 11 states: 0 - 10<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">The initial state is 0<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">The final state is 10<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Transition from 0 to 1 on input EPS<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Transition from 0 to 7 on input EPS<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Transition from 1 to 2 on input EPS<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Transition from 1 to 4 on input EPS<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Transition from 2 to 3 on input a<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Transition from 3 to 6 on input EPS<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Transition from 4 to 5 on input b<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Transition from 5 to 6 on input EPS<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Transition from 6 to 1 on input EPS<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Transition from 6 to 7 on input EPS<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Transition from 7 to 8 on input a<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Transition from 8 to 9 on input b<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Transition from 9 to 10 on input b</tt><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">As I mentioned earlier: as trivial as this implementation may seem at the moment, it is the basis we will build upon later. Presenting it in small pieces will, hopefully, make the learning curve of this difficult subject less steep for you.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h1 style="margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 36px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Implementing Thompson's Construction</h1><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Thompson's Construction tells us how to build NFAs from trivial regular expressions and then compose them into more complex NFAs. Let's start with the basics:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">The simplest regular expression</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The most basic regular expression is just some single character, for example&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. The NFA for such a regex is:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[]" id="ipb-attach-url-16078-0-46075500-1485530556" href="https://www.gamedev.net/uploads/" title="AdvGameProg_FSMandRDP_Bendersky_7.jpg - Size: 22.64KB, Downloads: 26" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-45037100-1370053818_thumb.jpg" id="ipb-attach-img-16078-0-46075500-1485530556" class="attach" width="480" height="119" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_7.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Here is the implementation:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// Builds a basic, single input NFA</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
NFA build_nfa_basic</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">input </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  NFA basic</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">2</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  basic</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">add_trans</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> basic</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Just to remind you about our NFA implementation: The first line of the function creates a new (with no transitions yet) NFA of size 2 (that is: with 2 states), and sets state 0 to be the initial state and state 1 to be the final state. The second line adds a transition to the NFA that says "</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">in</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;moves from state 0 to state 1". That's it - a simple regex, a simple construction procedure.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Note that this procedure is suited for the construction of an&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transition as well.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Some changes to the NFA class</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The previous implementation of a simple NFA class was just a starting point and we have quite a few changes to make.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">First of all, we need direct access to all of the class's data. Instead of providing get and set accessors (which I personally dislike), all of the class members (size, initial, final and trans_table) have been made public.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Recall what I told you about the internal representation inside the NFA class - it's a matrix representing the transition table of a graph. For each&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">i</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;and&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">j</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, trans_table[i][j] is the input that takes the NFA from state&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">i</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;to state&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">j</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. It's NONE if there's no such transition (hence a lot of space is wasted - the matrix representation, while fast, is inefficient in memory).&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Several new operations were added to the NFA class for our use in the NFA building functions. Their implementation can be found in nfa.cpp (included in the source code attached to this article). For now, try to understand how they work (it's really simple stuff), later you'll see why we need them for the implementation of various Thompson Construction stages. It may be useful to have the code of nfa.cpp in front of your eyes, and to follow the code for the operations while reading these explanations. Here they are:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">append_empty_state - I want to append a new, empty state to the NFA. This state will have no transitions to it and no transitions from it. If this is the transition table before the appending (a sample table with size 5 - states 0 to 4):</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[a142660ebbe17966feaaaf743d0d0ca7]" id="ipb-attach-url-16086-0-46747700-1485530556" href="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-20001700-1370059504.png" title="table.png - Size: 1.39KB, Downloads: 26" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-20001700-1370059504.png" id="ipb-attach-img-16086-0-46747700-1485530556" class="attach" width="183" height="186" alt="Attached Image: table.png" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Then this is the table after the appending:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[a142660ebbe17966feaaaf743d0d0ca7]" id="ipb-attach-url-16087-0-46794200-1485530556" href="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-41997200-1370059504.png" title="table2.png - Size: 1.67KB, Downloads: 26" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-41997200-1370059504.png" id="ipb-attach-img-16087-0-46794200-1485530556" class="attach" width="215" height="217" alt="Attached Image: table2.png" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The shaded cells are the transitions of the original table (be they empty or not), and the white cells are the new table cells - containing NONE.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">shift_states - I want to rename all NFA's states, shifting them "higher" by some given number. For instance, if I have 5 states numbered 0 - 4, and I want to have the same states, just named 2 - 6, I will call shift_states(2), and will get the following table:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[a142660ebbe17966feaaaf743d0d0ca7]" id="ipb-attach-url-16088-0-46842000-1485530556" href="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-60650200-1370059504.png" title="table3.png - Size: 1.89KB, Downloads: 27" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-60650200-1370059504.png" id="ipb-attach-img-16088-0-46842000-1485530556" class="attach" width="244" height="245" alt="Attached Image: table3.png" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">fill_states - I want to copy the states of some other NFA into the first table cells of my NFA. For instance, if I take the shifted table from above, and fill its first two states with a new small NFA, I will get (the new NFA's states are darkest):</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[a142660ebbe17966feaaaf743d0d0ca7]" id="ipb-attach-url-16089-0-46891000-1485530556" href="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-74344300-1370059504.png" title="table4.png - Size: 1.71KB, Downloads: 32" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-74344300-1370059504.png" id="ipb-attach-img-16089-0-46891000-1485530556" class="attach" width="244" height="245" alt="Attached Image: table4.png" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Note that using fill_states after shift_states is not incidental. These two operations were created to be used together - to concatenate two NFAs. You'll see how they are employed shortly.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Now I will explain how the more complex operations of Thompson's Construction are implemented. You should understand how the operations demonstrated above work, and also have looked at their source code (a good example of our NFA's internal table manipulation). You may still lack the "feel" of why these operations are needed, but this will soon be covered. Just understand how they work, for now.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Implementing alternation: a|b</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Here is the diagram of NFA alternation from earlier:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[]" id="ipb-attach-url-16079-0-46193800-1485530556" href="https://www.gamedev.net/uploads/" title="AdvGameProg_FSMandRDP_Bendersky_8.jpg - Size: 44.32KB, Downloads: 26" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-81015300-1370053818_thumb.jpg" id="ipb-attach-img-16079-0-46193800-1485530556" class="attach" width="480" height="280" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_8.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Given two NFAs, we must build another one that includes all the states of both NFAs plus additional, unified initial and final states. The function that implements this in nfa.cpp is build_nfa_alter. Take a look at its source code now - it is well commented and you should be able to follow through all the steps with little difficulty. Note the usage of the new NFA operations to complete the task. First, the NFAs states are shifted to make room for the full NFA. fill_states is used to copy the contents of nfa1 to the unified NFA. Finally, append_empty_state is used to add another state at the end - the new final state.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Implementing concatenation: ab</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Here is the diagram of NFA concatenation from earlier:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[]" id="ipb-attach-url-16080-0-46305200-1485530556" href="https://www.gamedev.net/uploads/" title="AdvGameProg_FSMandRDP_Bendersky_9.jpg - Size: 32.27KB, Downloads: 27" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-39247500-1370053819_thumb.jpg" id="ipb-attach-img-16080-0-46305200-1485530556" class="attach" width="480" height="128" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_9.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Given two NFAs, we must build another one that includes all the states of both NFAs (note that nfa1's final and nfa2's initial states are overlapping). The function that implements this in nfa.cpp is build_nfa_concat. Just as in build_nfa_alter, the new NFA operations are used to construct, step by step, a bigger NFA that contains all the needed states of the concatenation.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Implementing star: a*</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Here is the diagram of the NFA for a* from earlier:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[]" id="ipb-attach-url-16081-0-46429000-1485530556" href="https://www.gamedev.net/uploads/" title="AdvGameProg_FSMandRDP_Bendersky_10.jpg - Size: 32.15KB, Downloads: 11" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-72076200-1370053819_thumb.jpg" id="ipb-attach-img-16081-0-46429000-1485530556" class="attach" width="480" height="222" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_10.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Although the diagram looks complex, the implementation of this construction is relatively simple, as you'll see in build_nfa_star. There's no need to shift states, because no two NFAs are joined together. There's only a creation of new initial and final states, and new&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transitions added to implement the star operation.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Specialty of NFAs constructed by Thompson's Construction</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">You might have observed that all the NFAs constructed by Thompson's Construction have some very specific behavior. For instance, all the basic building blocks for single letters are similar, and the rest of the constructions just create new links between these states to allow for the alternation, concatenation and star operations. These NFAs are also special implementation-wise. For instance, note that in our NFA implementation, the first state is always the initial, and the last state is always final. You may have noted that this is useful in several operations.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">A complete NFA construction implementation</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">With these operations implemented, we now have a full NFA construction implementation in nfa.cpp! For instance, the regex&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;can be built as follows:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">NFA a </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> build_nfa_basic</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'a'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
NFA b </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> build_nfa_basic</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="str" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 136, 0);">'b'</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
NFA alt </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> build_nfa_alter</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">a</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> b</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
NFA str </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> build_nfa_star</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">alt</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
NFA sa </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> build_nfa_concat</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">str</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> a</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
NFA sab </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> build_nfa_concat</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">sa</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> b</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
NFA sabb </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> build_nfa_concat</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">sab</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> b</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">With these steps completed, sabb is the NFA representing&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. Note how simple it's to build NFAs this way! There's no need to specify individual transitions like we did before. In fact, it's not necessary to understand NFAs at all - just build the desired regex from its basic blocks, and that's it.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Even closer to complete automation</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Though it has now become much simpler to construct NFAs from regular expressions, it's still not as automatic as we'd like it to be. One still has to explicitly specify the regex structure. A useful representation of structure is an expression tree. For example, the construction above closely reflects this tree structure:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[a142660ebbe17966feaaaf743d0d0ca7]" id="ipb-attach-url-16085-0-46696300-1485530556" href="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-73193400-1370056646.jpg" title="AdvGameProg_FSMandRDP_Bendersky_13.jpg - Size: 52.73KB, Downloads: 31" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-73193400-1370056646_thumb.jpg" id="ipb-attach-img-16085-0-46696300-1485530556" class="attach" width="480" height="592" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_13.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">In this tree: . is concatenation, | is alternation, and * is star. So, the regex&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;is represented here in a tree form, just like an arithmetic expression.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Such trees in the world of parsing and compilation are called expression trees, or parse trees. For example, to implement an infix calculator (one that can calculate, for example: 3*4 + 5), the expressions are first turned into parse trees, and then these parse trees are walked to make the calculations.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Note, this is, as always, an issue of representation. We have the regex in a textual representation:&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;and we want it in NFA representation. Now we're wondering how to turn it from one representation to the other. My solution is to use an intermediate representation - a parse tree. Going from a regex to a parse tree is similar to parsing arithmetic expressions, and going from a parse tree to a NFA will be now demonstrated, using the Thompson's Construction building blocks described in this article.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">From a parse tree to a NFA</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">A parse tree in our case is just a binary tree, since no operation has more than two arguments. Concatenation and alternations have two arguments, hence their nodes in the tree have two children. Star has one argument - hence only the left child. Chars are the tree leaves. Take a good look at the tree drawn above, you'll see this very clearly.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Take a look at the file regex_parse.cpp from the source code archive on the book's companion website. It has a lot in it, but you only need to focus only on some specific things for now. First, let's look at the definition of parse_node:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">typedef</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">enum</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">CHR</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> STAR</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> ALTER</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> CONCAT</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> node_type</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="com" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(136, 0, 0);">// Parse node</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">struct</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> parse_node
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  parse_node</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">node_type type_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">char</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> data_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> parse_node</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">*</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> left_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> parse_node</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">*</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> right_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    type</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">type_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">),</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    data</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">data_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">),</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    left</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">left_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">),</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    right</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">right_</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  node_type type</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">char</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> data</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  parse_node</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">*</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> left</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  parse_node</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">*</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> right</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">};</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">This is a completely normal definition of a binary tree node that contains data and some type by which it is identified. Let us ignore, for the moment, the question of how such trees are built from regexes (if you're very curious - it's all in regex_parse.cpp), and instead think about how to build NFAs from such trees. It's very straight forward since the parse tree representation is natural for regexes. Here is the code of the tree_to_nfa function from regex_parse.cpp:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">NFA tree_to_nfa</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">parse_node</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">*</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> tree</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">assert</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">tree</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">switch</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">tree</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">type</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">case</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> CHR</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> build_nfa_basic</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">tree</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">data</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">case</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> ALTER</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> build_nfa_alter</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">tree_to_nfa</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">tree</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">left</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">),</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> tree_to_nfa</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">tree</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">right</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">));</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">case</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> CONCAT</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> build_nfa_concat</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">tree_to_nfa</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">tree</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">left</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">),</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> tree_to_nfa</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">tree</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">right</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">));</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">case</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> STAR</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> build_nfa_star</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">tree_to_nfa</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">tree</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-&gt;</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">left</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">));</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">default</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">assert</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">);</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Not much of a rocket science, is it? The power of recursion and trees allows us to build NFAs from parse trees in just 18 lines of code...&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">From a regex to a parse tree</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">If you've already looked at regex_parse.cpp, you surely noted that it contains quite a lot of code, much more than I've show so far. This code is the construction of parse trees from actual regexes (strings like&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">).&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">I really hate to do this, but I won't explain how this regex-to-tree code works. You'll just have to believe me it works (or study the code - it's there!). As a note, the parsing technique I employ to turn regexes into parse trees is called Recursive Descent parsing. It's an exciting topic and there is plenty of information available on it, if you are interested.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h1 style="margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 36px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Converting NFAs to DFAs</h1><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The N in NFA stands for non-deterministic. Our computers, however, are utterly deterministic beasts, which makes "true" simulation of an NFA impossible. But we do know how to simulate DFAs. So, what's left is to see how NFAs can be converted to DFAs.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The algorithm for constructing from an NFA a DFA that recognizes the same language is called "Subset Construction". The main idea of this algorithm is in the following observations:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><ul class="bbc" style="margin: 12px 0px 12px 40px; padding: 0px; list-style-position: outside; list-style-image: none; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">In the transition table of an NFA, given a state and an input there's a set of states we can move to. In a DFA, however, there's only one state we can move to.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Because of&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">eps</strong>&nbsp;transitions, even without an input there's a set of states an NFA can be in at any given moment. Not so with the DFA, for which we always know exactly in what state it is.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Although we can't know in which state from the sets described above the NFA is, the set is known. Therefore, we will represent each set of NFA states by a DFA state. The DFA uses its state to keep track of all possible states the NFA can be in after reading each input symbol.</li></ul><p><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Take, for example, the familiar NFA of the&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;regex (generated automatically by Thompson's Construction, with the code from the last column):</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[]" id="ipb-attach-url-16082-0-46547500-1485530556" href="https://www.gamedev.net/uploads/" title="AdvGameProg_FSMandRDP_Bendersky_11.jpg - Size: 29.11KB, Downloads: 27" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-20849400-1370053820_thumb.jpg" id="ipb-attach-img-16082-0-46547500-1485530556" class="attach" width="480" height="186" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_11.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The initial state of this NFA is 0... or is it ? Take a look at the diagram, and count in how many states this NFA can be&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">before</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;any input is read. If you remember the previous columns where I explained how&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transitions work, you should have no trouble noticing that initially, the NFA can be in any of the states {0, 1, 2, 4, 7}, because these are the states reachable by&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transitions from the initial state.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Note: the set T is reachable by&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;from itself&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">by definition</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;(the NFA doesn't have to take an&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transition, it can also stay in its current state).&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Now imagine we received the input&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. What happens next? In which states can the NFA be now? This should be easy to answer. Just go over all the states the NFA can be in&nbsp;</span><i style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">before</i><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;the input, and see where the input&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;leads from them. This way, a new set emerges: {1, 2, 3, 4, 6, 7, 8}. I hope you understand why: initially, the NFA can be in states {0, 1, 2, 4, 7}. But from states 0, 1 and 4 there are no transitions on&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">. The only transitions on&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">a</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;from that set are from state 2 (to state 3) and from state 7 (to state 8). However, the states {3, 8} is an incomplete answer. There are&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transitions from these states - to states {1, 2, 4, 6, 7}, so the NFA can actually be in any of the states {1, 2, 3, 4, 6, 7, 8}.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">If you understand this, you understand mostly how the Subset Construction algorithm works. All that's left is the implementation details. But before we get to the implementation of the conversion algorithm itself, there are a couple of prerequisites.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h1 style="margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 36px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">eps-closure</h1><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Given N - an NFA and T - a set of NFA states, we would like to know which states in N are reachable from states T by&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transitions.&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps-closure</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;is the procedure that answers this question. Here is the algorithm:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">algorithm eps</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">closure
inputs</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> N </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> NFA</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> T </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">set</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> of NFA states
output</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> eps</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">closure</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">T</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> states reachable </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> T </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">by</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> eps transitions
  eps</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">closure</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">T</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> T
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">foreach</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state t </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> T
    push</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">t</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> stack</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">while</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> stack </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">is</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">not</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> empty </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">do</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    t </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> pop</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">stack</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">foreach</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state u </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">with</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> an eps edge </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> t to u
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> u </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">is</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">not</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> eps</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">closure</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">T</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        add u to eps</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">closure</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">T</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
        push</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">u</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> stack</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">end</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> eps</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">closure</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">T</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">This algorithm iteratively finds all the states reachable by&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transitions from the states T. First, the states T themselves are added to the output. Then, one by one the states are checked for&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transitions, and the states these transitions lead to are also added to the output, and are pushed onto the stack (in order to be checked for&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transitions). The process proceeds iteratively, until no more states can be reached with&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transitions only.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">For instance, for the&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;NFA above, eps-closure({0}) = {0, 1, 2, 4, 7}, eps-closure({8, 9}) = {8, 9}, etc.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">In the attached source code, the implementation of eps-closure is in the file subset_construct.cpp, function build_eps_closure. It follows the algorithm outlined above very closely, so you should have no trouble understanding it.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">move - a new NFA member function</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Given T - a set of NFA states, and A - an input, we would like to know which states in the NFA are reachable from T with the input A. This operation was implemented in the function move, in nfa.cpp (member of the NFA class). The function is very simple. It traverses the set T, and looks for transitions on the given input, returning the states that can be reached. It doesn't take into account the&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;transitions from those states - there's eps-closure for that.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Keeping track of the input language of an NFA</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">For reasons that will soon become obvious, we must keep track of the input language used in the NFA. For example, for the regex&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;the language is {a, b}. A new member was added to the NFA class for this purpose - inputs. Take a look at the implementation in nfa.cpp to see how it's managed.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">DFA implementation</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Since we intend to build DFAs in this column, we need a DFA implementation. A very basic implementation was coded in dfa.h - take a look at it now. The DFA's transition table is implemented with a map, that maps (state, input) pairs to states. For example, (t1, i) will be mapped to t2 if input i in state t1 leads to state t2. Note that it's not the same representation as the one I used for the NFA. There are two reasons for this difference:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><ul class="bbc" style="margin: 12px 0px 12px 40px; padding: 0px; list-style-position: outside; list-style-image: none; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">I want you to see two different implementations of a graph (which is what a transition table is, as I told you before). Both are legitimate for certain purposes.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">A little bit of cheating... I know which operations I'll need from the DFA, so I'm tailoring the representation to these operations. This is a very common programming trick - one should always think about the ways a data structure will be used before he designs its exact implementation.</li></ul><p><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">So take a look at dfa.h - the DFA implementation is very simple - only a transition table, a start state and a set of final states. There are also methods for showing the DFA and for simulating it...&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">To remind you, this is the algorithm for DFA simulation :&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">algorithm dfa</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">simulate
inputs</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> D </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> DFA</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> I </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="typ" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 0, 102);">Input</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
output</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> ACCEPT </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">or</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> REJECT
  s </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> start state of D
  i </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">get</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">next</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> input character </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> I
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">while</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">not</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">end</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> of I </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">do</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    s </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state reached </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">with</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> input i </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state s
    i </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">get</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">next</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> input character </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">from</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> I
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">end</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> s </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">is</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> a </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">final</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> ACCEPT
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">else</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">return</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> REJECT</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Let's now finally learn how the DFA is built.&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h2 style="margin: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 30px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Subset Construction</h2><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">In the Introduction, I provided some observations about following NFA states, and gave an example. You saw that while it's impossible to know in what state an NFA is at any given moment, it's possible to know the set of states it can be in. Then, we can say with certainty that the NFA is in one of the states in this set, and not in any state that's not in the set.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">So, the idea of Subset Construction is to build a DFA that keeps track where the NFA can be. Each state in this DFA stands for a set of states the NFA can be in after some transition. "How is this going to help us?", you may ask yourself. Good question.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Recall how we simulate a DFA (if you don't feel confident with this material, read the 2nd part of Algorithmic Forays again). When can we say that a DFA recognizes an input string? When the input string ends, we look at the state we're left in. If this is a final state - ACCEPT, if it's not a final state - REJECT.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">So, say that we have a DFA, each state of which represents a set of NFA states. Since a NFA will always "pick the correct path", we can assume that if the set contains a final state, the NFA will be in it, and the string is accepted. More formally: A DFA state D represents S - a set of NFA states. If (and only if) one or more of the states in S is a final state, then D is a final state. Therefore, if a simulation ends in D, the input string is accepted.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">So, you see, it's useful to keep track of sets of NFA states. This will allow us to correctly "simulate" an NFA by simulating a DFA that represents it.</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Here's the Subset Construction algorithm:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">algorithm subset</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">construction
inputs</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> N </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> NFA
output</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">:</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> D </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> DFA
  add eps</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">closure</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">N</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">start</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> to dfa_states</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> unmarked
  D</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">start </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> eps</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">closure</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">N</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">start</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">while</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> there </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">is</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> an unmarked state T </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> dfa_states </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">do</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    mark</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">T</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> T contains a </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">final</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> state of N
      add T to D</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">final</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
    </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">foreach</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> input symbol i </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> N</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">inputs
      U </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> eps</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">closure</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">N</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">move</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">T</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> i</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">))</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
      </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">if</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> U </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">is</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">not</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">in</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> dfa_states
        add U to dfa_states</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> unmarked
      D</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">.</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">trans_table</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">T</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> i</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">)</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> U
  </span><span class="kwd" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 136);">end</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">The result of this procedure is D - a DFA with a transition table, a start state and a set of final states (not incidentally just what we need for our DFA class...).&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Here are some points to help you understand how&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">subset-construction</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;works:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><ul class="bbc" style="margin: 12px 0px 12px 40px; padding: 0px; list-style-position: outside; list-style-image: none; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">It starts by creating the initial state for the DFA. Since, as we saw in the Introduction, an initial state is really the NFA's initial state plus all the states reachable by&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">eps</strong>&nbsp;transitions from it, the DFA initial state is the&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">eps-closure</strong>&nbsp;of the NFA's initial state.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">A state is "marked" if all the transitions from it were explored.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">A state is added to the final states of the DFA if the set it represents contains the NFA's final state</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">The rest of the algorithm is a simple iterative graph search. Transitions are added to the DFA transition table for each symbol in the alphabet of the regex. So the DFA transition actually represents a transition to the&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">eps-closure</strong>&nbsp;in each case. Recall once again: a DFA state represents a set of states the NFA can be in after a transition.</li></ul><p><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">This algorithm is implemented in the function subset_construct in subset_construct.cpp, take a look at it now. Here are some points about the implementation:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><ul class="bbc" style="margin: 12px 0px 12px 40px; padding: 0px; list-style-position: outside; list-style-image: none; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">dfa_states from the algorithm is represented by two sets: marked_states and unmarked_states, with the obvious meanings.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Since DFA states are really sets of NFA states (see the state_rep typedef), something must be done about numbering them properly (we want a state to be represented by a simple number in the DFA). So, the dfa_state_num map takes care of it, with the numbers generated on-demand by gen_new_state.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">The loop runs while the unmarked_states set is not empty. Then, "some" state is marked by taking it out from the unmarked set (the first member of the set is picked arbitrarily) and putting it into the marked set.</li></ul><p><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">I hope an example will clear it all up. Let's take our favorite regex -&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">, and show how the algorithm runs on the NFA created from it. Here's the NFA again:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[]" id="ipb-attach-url-16082-0-46575700-1485530556" href="https://www.gamedev.net/uploads/" title="AdvGameProg_FSMandRDP_Bendersky_11.jpg - Size: 29.11KB, Downloads: 27" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-20849400-1370053820_thumb.jpg" id="ipb-attach-img-16082-0-46575700-1485530556" class="attach" width="480" height="186" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_11.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Following the algorithm: The start state of the equivalent DFA is the&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">eps-closure</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;of NFA state 0, which is A = {0, 1, 2, 4, 7}. So, we enter into the loop and mark A. A doesn't contain a final state, so we don't add it to the DFA's final set. The input symbol alphabet of the regex&nbsp;</span><strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">(a|b)*abb</strong><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">&nbsp;is {a, b}, so first we compute eps-closure(move(A, a)). Let's expand this:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">eps</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">closure</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">move</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">({</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">2</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">4</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">7</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">},</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> a</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">))</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> eps</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">closure</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">({</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">3</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">8</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">})</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">2</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">3</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">4</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">6</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">7</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">8</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">Let's call this set B. B is not a member of dfa_states yet, so we add it there, unmarked. We also create the DFA transition D.trans_table(A, a) = B. Now we're back to the inner loop, with the input b. Of all the states in set A, the only transition on b is from 4 to 5, so we create a new set:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">C </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> eps</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">closure</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">((</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">move</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">(</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">A</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> b</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">))</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> eps</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">-</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">closure</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">({</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">5</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">})</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">2</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">4</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">5</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">6</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">7</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">So C is added, unmarked, to dfa_states. Since all the alphabet symbols are done for A, we go back to the outer loop. Are there any unmarked states? Yes, there are B and C. So we pick B and go over the process again and again, until all the sets that are states of the DFA are marked. Then, the algorithm terminates, and D.trans_table contains all the relevant transitions for the DFA. The five different sets we get for DFA states are:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><pre class="prettyprint lang-auto linenums:0 prettyprinted" style="padding: 2px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; border-color: rgb(136, 136, 136); max-height: 450px; background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(40, 40, 40); letter-spacing: normal; margin-bottom: 0px !important; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline-style: initial !important; outline-width: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;"><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">A </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">0</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">2</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">4</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">7</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
B </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">2</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">3</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">4</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">6</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">7</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">8</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
C </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">2</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">4</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">5</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">6</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">7</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
D </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">2</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">4</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">5</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">6</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">7</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">9</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);">
E </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">=</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">{</span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">1</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">2</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">4</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">5</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">6</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">7</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">,</span><span class="pln" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 0, 0);"> </span><span class="lit" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(0, 102, 102);">10</span><span class="pun" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(102, 102, 0);">}</span></pre><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">A is the initial state of the DFA, since it contains the NFA initial state 0. E is obviously the only final state of the NFA, since it's the only one containing the NFA final state 10. If you follow the whole algorithm through and take note of the DFA transitions created, this is the resulting diagram:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><p style="margin-bottom: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal; text-align: center;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"><a class="resized_img" rel="lightbox[a142660ebbe17966feaaaf743d0d0ca7]" id="ipb-attach-url-16083-0-46651500-1485530556" href="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-64983300-1370053820.jpg" title="AdvGameProg_FSMandRDP_Bendersky_14.jpg - Size: 37.67KB, Downloads: 30" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 75, 114); margin: 0px 5px 5px 0px; display: inline-block;"><img src="https://www.gamedev.net/uploads/monthly_06_2013/ccs-209764-0-64983300-1370053820_thumb.jpg" id="ipb-attach-img-16083-0-46651500-1485530556" class="attach" width="480" height="253" alt="Attached Image: AdvGameProg_FSMandRDP_Bendersky_14.jpg" style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></a>&nbsp;<br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;"></p><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">You can easily:&nbsp;</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><ul class="bbc" style="margin: 12px 0px 12px 40px; padding: 0px; list-style-position: outside; list-style-image: none; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">See that this is a DFA - no&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">eps</strong>&nbsp;transitions, no more than a single transition on each input from a state.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">Verify that it indeed recognizes the regular expression&nbsp;<strong style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">(a|b)*abb</strong></li></ul><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><h1 style="margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 1.5; font-weight: 600; color: rgb(50, 50, 50); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; font-size: 36px; font-family: Ubuntu, Helvetica, Arial, sans-serif; letter-spacing: normal;">Conclusion</h1><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">We've come a long way, and finally our mission is accomplished. We've created a real regular expression engine. It's not a complete engine like the one Lex or Perl have, but it's a start. The basis has been laid, the rest is just extensions. Let's see what we have:</span><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"></p><ol class="bbc" style="margin-right: 0px; margin-bottom: 0px; margin-left: 40px; padding: 0px; list-style-position: initial; list-style-image: initial; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">A regular expression is read into a parse tree (implemented in regex_parse.cpp) - I didn't actually explain how this part is done, but you can trust me (and I hope you verified!) that it works.</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">An NFA is built from the regular expression, using Thompson's Construction (implemented in nfa.h/cpp)</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">The NFA is converted to a DFA, using the Subset Construction algorithm (implemented in subset_construct.h/cpp and dfa.h)</li><li style="margin: 0px; padding: 0px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;">The resulting DFA is simulated using the DFA simulation algorithm (implemented in dfa.h)</li></ol><p><br style="-webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;"><span style="color: rgb(40, 40, 40); font-family: helvetica, arial, verdana, tahoma, sans-serif; font-size: 14px; letter-spacing: normal;">A small main function is implemented in regex_parse.cpp. It reads a regex and a string as arguments, and says whether the string fits the regex. It does it by going through the steps mentioned above, so I advise you to take a look at it and make sure that you understand the order in which things are called.</span><br></p></body></html>