<!DOCTYPE html>
<!-- saved from url=(0031)http://ask.csdn.net/upload.html -->
<html class="cye-enabled cye-nm"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>上传图片</title>
    <meta name="author" content="CSDN">
    <meta name="Copyright" content="CSDN">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <link href="http://ask.csdn.net/favicon.ico" rel="SHORTCUT ICON">
    <script src="./jquery-1.11.1.min.js"></script><style id="nightModeStyle">
html.cye-enabled.cye-nm:not(*:-webkit-full-screen) body,
 html.cye-enabled.cye-nm:not(*:-webkit-full-screen) #cye-workaround-body {-webkit-filter:contrast(91%) brightness(84%) invert(1);}</style><style id="cyebody">html.cye-enabled.cye-lm body{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyediv">html.cye-enabled.cye-lm div{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyetable">html.cye-enabled.cye-lm th{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}html.cye-enabled.cye-lm td{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyetextInput">html.cye-enabled.cye-lm input[type=text]{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}html.cye-enabled.cye-lm textarea{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyeselect">html.cye-enabled.cye-lm select{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyeul">html.cye-enabled.cye-lm ul{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyeChangeByClick">html.cye-enabled.cye-lm .cye-lm-tag,html.cye-enabled.cye-lm.cye-lm-tag{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style>
    <script src="./jquery.form.js"></script>
<style>
    body {margin: 0;}
    * {box-sizing: border-box; font: 12px/20px 'microsoft yahei';}
    .up_img_loading {display: none;}
    .up_img_loading.active {display: block; position: fixed; z-index: 3; background: rgba(255,255,255,.9); background: #fff \9; width: 100%; height: 100%; line-height: 90px; top: 0; right: 0; text-align: center;}
    .markdown_file_name {width: 100%; height: 30px; border: 1px solid #ddd; margin: 25px 0; padding: 5px 5px; white-space: nowrap; overflow: hidden; color: #999;}
    .markdown_file_msg {color: #666; position: absolute; margin-top: -25px;}
    .btn {text-align: right;}
    .btn span {background: #999; color: #fff; padding: 3px 10px; cursor: pointer;}
    label {position: absolute; right: 1px; top: 26px; background: #eee; color: #666; padding: 4px 8px; border-left: 1px solid #ddd;}
    form {width: 1px; height: 1px ; position: absolute; overflow: hidden;}
</style>
</head><div id="cyeBlackMaskLayer" style="background-color: rgb(19, 19, 19); position: fixed; width: 1980px; height: 1080px; z-index: -2147483648;"></div><style id="stylish-2" class="stylish" type="text/css">/* AGENT_SHEET */
/* ▓▓ NIGHTSHIFT - eye care:                  ▓▓
   ▓▓ A darkening style for all websites.     ▓▓
   ▓▓ by vetinari - 2009                      ▓▓
   ▓▓ contact: vetinari.userstyles@inode.at   ▓▓
   ▓▓ --------------------------------------- ▓▓
   ▓▓ last modified: 13.06.2012               ▓▓
   ▓▓_________________________________________▓▓ */

@namespace url(http://www.w3.org/1999/xhtml);
body,html {min-height: 100%!important; }

html, body{background-color:#111!important}
body>*:not(:empty){background-color:#222!important}
body>*>*:not(:empty){background-color:#222!important}
body>*>*>*:not(:empty){background-color:#282828!important}
body>*>*>*>*:not(:empty){background-color:#282828!important}
body>*>*>*>*>*:not(:empty){background-color:#383838!important}
body>*>*>*>*>* *{background-color:#383838!important}
body table:not(:empty){background-color:#282828!important}
body table>tbody>tr:nth-child(even){background-color:rgba(0,0,0,.2)!important}
body table>tbody>tr>td:nth-child(odd){background-color:rgba(0,0,0,.1)!important}
body *:empty{background-color: #111!important}

body p:not(:empty), body p *, body h1, body h1 *, body h2, body h2 *, body h3, body h3 *, body h4, body h4 *, body h5, body h5 *, body strong>*, body b>*, body em>*, body i>*,  body span>*:not(img){background:transparent none!important}
body h1, body h1 *, body h2, body h2 *, p>strong:only-of-type,  p>b:only-of-type{color: #a98!important}
body h3, body h3 *, body h4, body h4 *{color: #aaa!important}

*:not([onclick]):not(input):not(a):not(img):not([class^="UI"]), body a:not(:empty), div:not([onclick]){background-image:none!important; text-indent:0!important}
*[onclick] {color:#79a!important}
*[onclick]:hover {color:#99a8aa!important}
body hr{background: #666 none!important; color: #666!important; border:1px solid #666!important; height: 1px!important; overflow:hidden!important; display: block!important}
* {color: #c0c0c0!important; border-color:#60666a!important;box-shadow: 0 0 0 #333!important}
* body a, body a *{color: #B6AA7B!important;}
/* body a:visited, body a:visited *{color: #666!important;} */
body a:hover, body a:hover *{color: #D9C077!important; text-decoration: underline!important}
body img,a[href] img, a[href] button, input[type="image"],*[onclick]:empty, body a:empty{opacity:.5!important}
body img:hover,a[href]:hover img, a[href]:hover button, *[onclick]:empty:hover, body a:empty:hover{opacity:1!important}

body span>img{visibility:visible!important}

body input[type],  input, body textarea, body select{-moz-appearance:none!important; color: #bbb!important; border-radius:4px !important; border-width: 1px!important; border-color:rgba(100,100,100,.5)!important;border-style:solid!important; background:-moz-linear-gradient( top , #303030 40%, #383838, #343434 ) #333 !important; box-shadow: inset 1px 1px 1px #111!important}
body input[type="submit"], body input[type="button"], body input[type="image"],  body input[type="reset"], body button{-moz-appearance:none!important; color: #bbb!important; border-radius:4px !important; border-width: 1px!important; border-color:rgba(100,100,100,.5)!important;border-style:solid!important; background:-moz-linear-gradient( top , #404040 45%, #282828 55%) #333 !important; box-shadow: 1px 1px 1px #111!important}
body input[type]>*, body textarea>*{-moz-appearance:none!important; background:transparent none  !important; color: #bbb!important; border-style:solid!important; border-width: 0px!important;}
body select *{background-color:transparent !important; color: #bbb!important; border-style:solid!important; border-width: 0px!important;}

pre:not(:empty), code:not(:empty) , cite:not(:empty), pre:not(:empty) *, code:not(:empty) *, cite:not(:empty) *{background-image:url(data:image/gif;base64,R0lGODlhBAAEAIAAABERESIiIiH5BAAAAAAALAAAAAAEAAQAAAIGTACXaHkFADs=)!important; color: #bcc8dc!important;}</style>
<body>
<div class="markdown_file_name"></div>
<div class="markdown_file_msg"></div>
<label for="markdown_file">浏览..</label>
<div class="up_img_loading">上传中...</div>
<div class="btn" onclick="submit()"><span>上传图片</span></div>

<form action="http://ask.csdn.net/upload_picture.json" id="picture_dialog_form" method="post">
    <input type="file" name="markdown_file" id="markdown_file" accept="image/gif, image/jpeg, image/png">
</form>
<script>
    $('.up_img_loading').removeClass('active');
    document.domain = "csdn.net";
    $('#markdown_file').change(function() {
        var file_name = $(this).val();
        $('.markdown_file_name').text(file_name);
        $(".markdown_file_msg").html("");
    });
    function submit(){
        $('.up_img_loading').addClass('active');

        var form = $("#picture_dialog_form");
        $(form).ajaxSubmit({
            success: function (result) {
                result = $.parseJSON(result);
                if( result.status==500){
                    $(".markdown_file_msg").html(result.msg);
                    $('.up_img_loading').removeClass('active');
                }else{
                    $('.markdown_file_name').text(result.url);
                    $('.up_img_loading').removeClass('active');
                    window.parent.editor_change_ask_o(result.url);
                }
            },
            error: function(err) {
                $(".markdown_file_msg").html("系统繁忙，请稍后再试");
                $('.up_img_loading').removeClass('active');
            }
        });
    }
</script>


</body></html>